<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blackjack Session Tracker</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            padding: 30px;
            background: rgba(0, 0, 0, 0.02);
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            text-align: center;
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-value {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-label {
            color: #666;
            font-size: 0.9em;
        }

        .positive { color: #27ae60; }
        .negative { color: #e74c3c; }
        .neutral { color: #3498db; }

        .form-section {
            padding: 30px;
            border-top: 1px solid #eee;
        }

        .form-title {
            font-size: 1.5em;
            margin-bottom: 20px;
            color: #333;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            margin-bottom: 5px;
            color: #555;
            font-weight: 500;
        }

        .form-group input, .form-group select, .form-group textarea {
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            margin-right: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #95a5a6, #7f8c8d);
        }

        .table-container {
            padding: 30px;
            border-top: 1px solid #eee;
        }

        .table-wrapper {
            overflow-x: auto;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
        }

        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }

        th {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            font-weight: 600;
            color: #333;
            position: sticky;
            top: 0;
        }

        tr:hover {
            background: rgba(102, 126, 234, 0.05);
        }

        .delete-btn {
            background: #e74c3c;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.8em;
        }

        .delete-btn:hover {
            background: #c0392b;
        }

        .export-section {
            padding: 30px;
            border-top: 1px solid #eee;
            text-align: center;
        }

        @media (max-width: 768px) {
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .header h1 {
                font-size: 2em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üÉè Blackjack Session Tracker</h1>
            <p>Track your wins, losses, and improve your game</p>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-value neutral" id="totalSessions">0</div>
                <div class="stat-label">Total Sessions</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="netProfit">$0</div>
                <div class="stat-label">Net Profit/Loss</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="winRate">0%</div>
                <div class="stat-label">Win Rate</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="avgSession">$0</div>
                <div class="stat-label">Avg per Session</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="biggestWin">$0</div>
                <div class="stat-label">Biggest Win</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="biggestLoss">$0</div>
                <div class="stat-label">Biggest Loss</div>
            </div>
        </div>

        <div class="form-section">
            <h2 class="form-title">Add New Session</h2>
            <div class="form-grid">
                <div class="form-group">
                    <label for="date">Date</label>
                    <input type="date" id="date" required>
                </div>
                <div class="form-group">
                    <label for="casino">Casino/Location</label>
                    <input type="text" id="casino" placeholder="e.g., Bellagio, Online">
                </div>
                <div class="form-group">
                    <label for="buyIn">Buy-in Amount ($)</label>
                    <input type="number" id="buyIn" placeholder="100" step="0.01" required>
                </div>
                <div class="form-group">
                    <label for="cashOut">Cash-out Amount ($)</label>
                    <input type="number" id="cashOut" placeholder="150" step="0.01" required>
                </div>
                <div class="form-group">
                    <label for="startTime">Start Time</label>
                    <input type="time" id="startTime" placeholder="14:00">
                </div>
                <div class="form-group">
                    <label for="endTime">End Time</label>
                    <input type="time" id="endTime" placeholder="16:00">
                </div>
                <div class="form-group">
                    <label for="notes">Notes</label>
                    <input type="text" id="notes" placeholder="Strategy notes, table conditions">
                </div>
            </div>
            <button class="btn" onclick="addSession()">Add Session</button>
            <button class="btn btn-secondary" onclick="clearForm()">Clear Form</button>
        </div>

        <div class="table-container">
            <h2 class="form-title">Session History</h2>
            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Casino</th>
                            <th>Buy-in</th>
                            <th>Cash-out</th>
                            <th>Profit/Loss</th>
                            <th>Start Time</th>
                            <th>End Time</th>
                            <th>Duration</th>
                            <th>Hourly Rate</th>
                            <th>Notes</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody id="sessionTableBody">
                    </tbody>
                </table>
            </div>
        </div>

        <div class="export-section">
            <button class="btn" onclick="exportData()">Export to CSV</button>
            <button class="btn btn-secondary" onclick="clearAllData()">Clear All Data</button>
        </div>
    </div>

    <script>
        var sessions = [];
        var nextId = 1;

        function addSession() {
            var date = document.getElementById('date').value;
            var casino = document.getElementById('casino').value || 'Unknown';
            var buyIn = parseFloat(document.getElementById('buyIn').value);
            var cashOut = parseFloat(document.getElementById('cashOut').value);
            var startTime = document.getElementById('startTime').value;
            var endTime = document.getElementById('endTime').value;
            var notes = document.getElementById('notes').value || '';

            if (!date || isNaN(buyIn) || isNaN(cashOut)) {
                alert('Please fill in Date, Buy-in, and Cash-out amounts');
                return;
            }

            var duration = 0;
            if (startTime && endTime) {
                var start = new Date('1970-01-01T' + startTime + ':00');
                var end = new Date('1970-01-01T' + endTime + ':00');
                
                // Handle sessions that cross midnight
                if (end < start) {
                    end.setDate(end.getDate() + 1);
                }
                
                duration = (end - start) / (1000 * 60); // Convert to minutes
            }

            var profit = cashOut - buyIn;
            var hourlyRate = duration > 0 ? (profit / (duration / 60)) : 0;

            var session = {
                id: nextId++,
                date: date,
                casino: casino,
                buyIn: buyIn,
                cashOut: cashOut,
                profit: profit,
                duration: duration,
                hourlyRate: hourlyRate,
                startTime: startTime,
                endTime: endTime,
                notes: notes
            };

            sessions.push(session);
            updateDisplay();
            clearForm();
        }

        function removeSession(sessionId) {
            for (var i = 0; i < sessions.length; i++) {
                if (sessions[i].id == sessionId) {
                    sessions.splice(i, 1);
                    break;
                }
            }
            updateDisplay();
        }

        function updateDisplay() {
            updateStats();
            updateTable();
        }

        function updateStats() {
            var total = sessions.length;
            var totalProfit = 0;
            var wins = 0;
            var maxWin = 0;
            var maxLoss = 0;

            for (var i = 0; i < sessions.length; i++) {
                totalProfit += sessions[i].profit;
                if (sessions[i].profit > 0) wins++;
                if (sessions[i].profit > maxWin) maxWin = sessions[i].profit;
                if (sessions[i].profit < maxLoss) maxLoss = sessions[i].profit;
            }

            var winRate = total > 0 ? (wins / total * 100) : 0;
            var avgProfit = total > 0 ? (totalProfit / total) : 0;

            document.getElementById('totalSessions').textContent = total;
            
            var netEl = document.getElementById('netProfit');
            netEl.textContent = '$' + totalProfit.toFixed(2);
            netEl.className = 'stat-value ' + (totalProfit >= 0 ? 'positive' : 'negative');

            document.getElementById('winRate').textContent = winRate.toFixed(1) + '%';
            
            var avgEl = document.getElementById('avgSession');
            avgEl.textContent = '$' + avgProfit.toFixed(2);
            avgEl.className = 'stat-value ' + (avgProfit >= 0 ? 'positive' : 'negative');

            document.getElementById('biggestWin').textContent = '$' + maxWin.toFixed(2);
            document.getElementById('biggestLoss').textContent = '$' + maxLoss.toFixed(2);
        }

        function updateTable() {
            var tbody = document.getElementById('sessionTableBody');
            tbody.innerHTML = '';

            // Sort by date (newest first)
            var sorted = sessions.slice().sort(function(a, b) {
                return new Date(b.date) - new Date(a.date);
            });

            for (var i = 0; i < sorted.length; i++) {
                var s = sorted[i];
                var row = tbody.insertRow();
                
                row.innerHTML = 
                    '<td>' + new Date(s.date).toLocaleDateString() + '</td>' +
                    '<td>' + s.casino + '</td>' +
                    '<td>$' + s.buyIn.toFixed(2) + '</td>' +
                    '<td>$' + s.cashOut.toFixed(2) + '</td>' +
                    '<td class="' + (s.profit >= 0 ? 'positive' : 'negative') + '">$' + s.profit.toFixed(2) + '</td>' +
                    '<td>' + (s.startTime || '-') + '</td>' +
                    '<td>' + (s.endTime || '-') + '</td>' +
                    '<td>' + (s.duration > 0 ? Math.round(s.duration) + ' min' : '-') + '</td>' +
                    '<td class="' + (s.hourlyRate >= 0 ? 'positive' : 'negative') + '">$' + s.hourlyRate.toFixed(2) + '/hr</td>' +
                    '<td>' + s.notes + '</td>' +
                    '<td><button class="delete-btn" onclick="removeSession(' + s.id + ')">Delete</button></td>';
            }
        }

        function clearForm() {
            document.getElementById('casino').value = '';
            document.getElementById('buyIn').value = '';
            document.getElementById('cashOut').value = '';
            document.getElementById('startTime').value = '';
            document.getElementById('endTime').value = '';
            document.getElementById('notes').value = '';
        }

        function exportData() {
            if (sessions.length === 0) {
                alert('No sessions to export');
                return;
            }

            var csv = 'Date,Casino,Buy-in,Cash-out,Profit/Loss,Start Time,End Time,Duration,Hourly Rate,Notes\n';
            for (var i = 0; i < sessions.length; i++) {
                var s = sessions[i];
                var durationStr = s.duration > 0 ? Math.round(s.duration) + ' min' : '';
                csv += s.date + ',"' + s.casino + '",' + s.buyIn + ',' + s.cashOut + ',' + 
                       s.profit + ',"' + (s.startTime || '') + '","' + (s.endTime || '') + '","' + durationStr + '",' + s.hourlyRate.toFixed(2) + ',"' + s.notes + '"\n';
            }

            var blob = new Blob([csv], { type: 'text/csv' });
            var url = URL.createObjectURL(blob);
            var a = document.createElement('a');
            a.href = url;
            a.download = 'blackjack-sessions.csv';
            a.click();
            URL.revokeObjectURL(url);
        }

        function clearAllData() {
            sessions = [];
            nextId = 1;
            updateDisplay();
        }

        // Initialize
        window.onload = function() {
            updateDisplay();
            document.getElementById('date').valueAsDate = new Date();
        };
    </script>
</body>
</html>
